function initMap(){createMap(),setMapEvent(),addMapControl(),addMarker()}function createMap(){var n=new BMap.Map("dituContent"),e=new BMap.Point(116.421329,39.903583);n.centerAndZoom(e,18),window.map=n}function setMapEvent(){map.enableDragging(),map.enableScrollWheelZoom(),map.enableDoubleClickZoom(),map.enableKeyboard()}function addMapControl(){var n=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});map.addControl(n)}function addMarker(){for(var n=0;n<markerArr.length;n++){var e=markerArr[n],t=e.point.split("|")[0],a=e.point.split("|")[1],o=new BMap.Point(t,a),i=createIcon(e.icon),r=new BMap.Marker(o,{icon:i}),p=(createInfoWindow(n),new BMap.Label(e.title,{offset:new BMap.Size(e.icon.lb-e.icon.x+10,(-20))}));r.setLabel(p),map.addOverlay(r),p.setStyle({borderColor:"#808080",color:"#333",cursor:"pointer"}),function(){var t=createInfoWindow(n),a=r;a.addEventListener("click",function(){this.openInfoWindow(t)}),t.addEventListener("open",function(){a.getLabel().hide()}),t.addEventListener("close",function(){a.getLabel().show()}),p.addEventListener("click",function(){a.openInfoWindow(t)}),e.isOpen&&(p.hide(),a.openInfoWindow(t))}()}}function createInfoWindow(n){var e=markerArr[n],t=new BMap.InfoWindow("<b class='iw_poi_title' title='"+e.title+"'>"+e.title+"</b><div class='iw_poi_content'>"+e.content+"</div>");return t}function createIcon(n){var e=new BMap.Icon("https://api.map.baidu.com/lbsapi/creatmap/images/us_mk_icon.png",new BMap.Size(n.w,n.h),{imageOffset:new BMap.Size((-n.l),(-n.t)),infoWindowOffset:new BMap.Size(n.lb+5,1),offset:new BMap.Size(n.x,n.h)});return e}var markerArr=[{title:"大智吉他",content:"我的备注",point:"116.419734|39.903251",isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}}];initMap();